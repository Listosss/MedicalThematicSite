{"ast":null,"code":"import React,{useContext,useState,useRef}from'react';import{AuthContext}from'../../context/AuthContext';import\"./AccountPage.css\";import{SavedUserArticles}from'../../components/SavedUserArticles/SavedUserArticles';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function AccountPage(){const{user,logout,updateAvatar}=useContext(AuthContext);const[preview,setPreview]=useState((user===null||user===void 0?void 0:user.avatar)||\"./assets/avatars/default_avatar.png\");const[isChoosing,setChoosing]=useState(false);const fileInputRef=useRef(null);const handleFileChange=e=>{setChoosing(true);const file=e.target.files[0];if(file){const reader=new FileReader();reader.onload=()=>{setPreview(reader.result);};reader.readAsDataURL(file);}};const handleFileClick=()=>{if(preview){setChoosing(false);updateAvatar(preview);}};const cancelChangeAvatar=()=>{if(preview){setChoosing(false);setPreview((user===null||user===void 0?void 0:user.avatar)||\"./assets/avatars/default_avatar.png\");if(fileInputRef.current){fileInputRef.current.value=\"\";}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"page_wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"account_wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"account_info\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"account_name\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"p\",{name:\"account_name\",children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"account_email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"p\",{name:\"account_email\",children:user===null||user===void 0?void 0:user.email}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"account_date\",children:\"Date:\"}),/*#__PURE__*/_jsx(\"p\",{name:\"account_date\",children:user?Object.values(user===null||user===void 0?void 0:user.date).join(\" \"):\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"account_role\",children:\"Role:\"}),/*#__PURE__*/_jsx(\"p\",{name:\"account_role\",children:user===null||user===void 0?void 0:user.role})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"change_avatar_div\",children:[/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"avatar\",className:\"account_avatar_preview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"file_input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",children:\"Choose file\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",className:\"change_avatar_input\",onChange:handleFileChange,accept:\"image/*\",ref:fileInputRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"avatar_btns_panel\",hidden:!isChoosing,children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleFileClick,className:\"change_avatar_btn\",children:\"Ok\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelChangeAvatar,className:\"cancel_avatar_btn\",children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsx(SavedUserArticles,{}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"exit_btn\",children:\"Exit\"})]});}","map":{"version":3,"names":["React","useContext","useState","useRef","AuthContext","SavedUserArticles","jsx","_jsx","jsxs","_jsxs","AccountPage","user","logout","updateAvatar","preview","setPreview","avatar","isChoosing","setChoosing","fileInputRef","handleFileChange","e","file","target","files","reader","FileReader","onload","result","readAsDataURL","handleFileClick","cancelChangeAvatar","current","value","className","children","htmlFor","name","email","Object","values","date","join","role","src","alt","type","id","onChange","accept","ref","hidden","onClick"],"sources":["C:/Users/Админ/Documents/Svarchik/ТПП/kurs/portal/frontend/src/pages/AccountPage/AccountPage.jsx"],"sourcesContent":["import React, { useContext, useState, useRef } from 'react'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport \"./AccountPage.css\"\r\nimport { SavedUserArticles } from '../../components/SavedUserArticles/SavedUserArticles';\r\n\r\nexport function AccountPage() {\r\n  const { user, logout, updateAvatar } = useContext(AuthContext);\r\n  const [preview, setPreview] = useState(user?.avatar || \"./assets/avatars/default_avatar.png\");\r\n  const [isChoosing, setChoosing] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleFileChange = (e) => {\r\n    setChoosing(true)\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        setPreview(reader.result);\r\n      }\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n  const handleFileClick = () => {\r\n    if (preview) {\r\n      setChoosing(false)\r\n      updateAvatar(preview);\r\n    }\r\n  }\r\n  const cancelChangeAvatar = () => {\r\n    if (preview) {\r\n      setChoosing(false)\r\n      setPreview(user?.avatar || \"./assets/avatars/default_avatar.png\");\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = \"\"; \r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='page_wrapper'>\r\n      <div className='account_wrapper'>\r\n        <div className='account_info'>\r\n\r\n          <label htmlFor=\"account_name\">Name:</label>\r\n          <p name=\"account_name\">{user?.name}</p>\r\n\r\n          <label htmlFor=\"account_email\">Email:</label>\r\n          <p name=\"account_email\">{user?.email}</p>\r\n\r\n          <label htmlFor=\"account_date\">Date:</label>\r\n          <p name=\"account_date\">{user? Object.values(user?.date).join(\" \"):\"\"}</p>\r\n\r\n          <label htmlFor=\"account_role\">Role:</label>\r\n          <p name=\"account_role\">{user?.role}</p>\r\n          \r\n        </div>\r\n        <div className='change_avatar_div'>\r\n          <img src={preview} alt='avatar' className='account_avatar_preview' />\r\n\r\n          <div className=\"file_input\">\r\n            <label htmlFor=\"file\">Choose file</label>\r\n            <input type='file' id=\"file\" className='change_avatar_input' onChange={handleFileChange} accept=\"image/*\" ref={fileInputRef} />\r\n          </div>\r\n\r\n          <div className='avatar_btns_panel' hidden={!isChoosing}>\r\n            <button onClick={handleFileClick} className='change_avatar_btn'>Ok</button>\r\n            <button onClick={cancelChangeAvatar} className='cancel_avatar_btn'>Cancel</button>\r\n          </div>\r\n        </div>\r\n        </div>\r\n        <SavedUserArticles />\r\n        <button onClick={logout} className='exit_btn'>Exit</button>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}