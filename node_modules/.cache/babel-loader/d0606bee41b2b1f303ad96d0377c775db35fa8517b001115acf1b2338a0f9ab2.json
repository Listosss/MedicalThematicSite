{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./MainPage.css';import{ArticleCard}from'../../components/ArticleCard/ArticleCard';import'font-awesome/css/font-awesome.min.css';import{CategoriesBanner}from'../../components/CategoriesBanner/CategoriesBanner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function MainPage(){const[articlesData,setArticlesData]=useState([]);const[isLoading,setLoading]=useState(false);const getArticles=async()=>{try{var _data$esearchresult;setLoading(true);let response;response=await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=Depression[Mesh]+AND+HasAbstract[Filter]&retmax=3&retmode=json`);const data=await response.json();const idArray=data===null||data===void 0?void 0:(_data$esearchresult=data.esearchresult)===null||_data$esearchresult===void 0?void 0:_data$esearchresult.idlist;if(idArray&&idArray.length>0){var _articlesData$result;response=await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=${idArray.join(',')}&retmode=json`);const articlesData=await response.json();const uids=articlesData===null||articlesData===void 0?void 0:(_articlesData$result=articlesData.result)===null||_articlesData$result===void 0?void 0:_articlesData$result.uids;if(uids&&uids.length>0){const articles=uids.map(id=>{const{title,uid}=articlesData.result[id];const object={title,uid};return object;});setArticlesData(articles);localStorage.setItem('articlesData',JSON.stringify(articles));}}else console.log('No articles found');setLoading(false);}catch(error){console.error('Error fetching articles:',error);}};useEffect(()=>{const cachedArticles=localStorage.getItem('articlesData');if(cachedArticles){setArticlesData(JSON.parse(cachedArticles));return;}else getArticles();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CategoriesBanner,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"page_wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"home_content_text\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Help your health\"}),/*#__PURE__*/_jsx(\"p\",{children:\"This site is dedicated to making health and wellness information accessible, understan\\xADdable, and actionable so that readers can make the best possible decisions about their health. \"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Expert-Reviewed\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Our content is created, fact-checked, and reviewed by qualified writers, editors, clinicians, and other contributors. The information we publish is accurate, evidence-based, current, person-centric, and trustworthy.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Community & Support\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Our platform offers a safe place for each community to give and receive advice through one-on-one messaging and group discussions, all while offering members access to the latest news and research updates.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"top_reads_section\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"TOP READS\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-arrow-right\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main_page_articles\",children:[articlesData.length>0&&!isLoading&&articlesData.map((article,index)=>/*#__PURE__*/_jsx(ArticleCard,{article:article},'article'+index)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading_div\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-success\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"})})})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","ArticleCard","CategoriesBanner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MainPage","articlesData","setArticlesData","isLoading","setLoading","getArticles","_data$esearchresult","response","fetch","data","json","idArray","esearchresult","idlist","length","_articlesData$result","join","uids","result","articles","map","id","title","uid","object","localStorage","setItem","JSON","stringify","console","log","error","cachedArticles","getItem","parse","children","className","article","index","role"],"sources":["C:/Users/Админ/Documents/Svarchik/ТПП/kurs/portal/frontend/src/pages/MainPage/MainPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport './MainPage.css'\r\nimport { ArticleCard } from '../../components/ArticleCard/ArticleCard'\r\nimport 'font-awesome/css/font-awesome.min.css';\r\nimport { CategoriesBanner } from '../../components/CategoriesBanner/CategoriesBanner';\r\n\r\nexport function MainPage() {\r\n    const [articlesData, setArticlesData] = useState([]);\r\n    const [isLoading, setLoading] = useState(false);\r\n\r\n    const getArticles = async () => {\r\n        try {\r\n            setLoading(true);\r\n            let response;\r\n            response = await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=Depression[Mesh]+AND+HasAbstract[Filter]&retmax=3&retmode=json`);\r\n            const data = await response.json()\r\n            const idArray = data?.esearchresult?.idlist\r\n\r\n            if (idArray && idArray.length > 0) {\r\n                response = await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=${idArray.join(',')}&retmode=json`);\r\n                const articlesData = await response.json();\r\n                const uids = articlesData?.result?.uids;\r\n                if (uids && uids.length > 0) {\r\n                    const articles = uids.map(id => {\r\n                        const { title, uid } = articlesData.result[id];\r\n                        const object = { title, uid };\r\n                        return object\r\n                    });\r\n                    setArticlesData(articles);\r\n                    localStorage.setItem('articlesData', JSON.stringify(articles));\r\n                }\r\n            }\r\n            else console.log('No articles found');\r\n            setLoading(false)\r\n        } catch (error) {\r\n            console.error('Error fetching articles:', error);\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        const cachedArticles = localStorage.getItem('articlesData');\r\n        if (cachedArticles) {\r\n            setArticlesData(JSON.parse(cachedArticles));\r\n            return;\r\n        } else\r\n            getArticles();\r\n\r\n    }, [])\r\n\r\n    return (<>\r\n        <CategoriesBanner />\r\n        <div className='page_wrapper'>\r\n            <div className='home_content_text'>\r\n                <div>\r\n                    <h1>Help your health</h1>\r\n                    <p>This site is dedicated to making health and wellness information accessible, understan&shy;dable, and actionable so that readers can make the best possible decisions about their health. </p>\r\n                </div>\r\n                <div>\r\n                    <h1>Expert-Reviewed</h1>\r\n                    <p>Our content is created, fact-checked, and reviewed by qualified writers, editors, clinicians, and other contributors.\r\n                        The information we publish is accurate, evidence-based, current, person-centric, and trustworthy.</p>\r\n                </div>\r\n                <div>\r\n                    <h1>Community & Support</h1>\r\n                    <p>Our platform offers a safe place for each community to give and receive advice through one-on-one messaging and group discussions, all while offering members access to the latest news and research updates.</p>\r\n                </div>\r\n            </div>\r\n            <div className='top_reads_section'><h1 >TOP READS</h1><i className=\"fa fa-arrow-right\"></i></div>\r\n            <div className='main_page_articles'>\r\n                {(articlesData.length > 0 && !isLoading) && articlesData.map((article, index) => <ArticleCard article={article} key={'article'+index} />)}\r\n                {isLoading && <div className='loading_div'><div className=\"spinner-border text-success\" role=\"status\" >\r\n                    <span className=\"visually-hidden\">Загрузка...</span></div>\r\n                </div>}\r\n            </div>\r\n        </div>\r\n    </>\r\n    )\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}